<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>US2016</title><!-- d3 and plugins -->

    <script src="//d3js.org/d3.v3.min.js">
    </script>
    <style type="text/css">

    .tooltip {
    border-radius: 10px;
    position: absolute;
    text-align: center;
    width: 60px;
    height: 12px;
    padding: 8px;
    margin-top: -20px;
    font: 10px sans-serif;
    background: #ddd;
    pointer-events: none;
    background-color: white;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
    -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
    }
    </style>
</head>
<body>

    <script>
    //console.log('here')
    var margins = {
    top: 12,
    left: 24,
    right: 24,
    bottom: 12
    },
    width = 500 - margins.left - margins.right,
    height = 30 - margins.top - margins.bottom,
    dataset = [{
        data: [{
            group_name: 'Hiking',
            count: 345
        }],
        name: 'Hiking'
    }, {
        data: [{
            group_name: 'Biking',
            count: 573
        }],
    }, {
        data: [{
            group_name: 'Driving',
            count: 573
        }],
    }, {
        data: [{
            group_name: 'Not yet',
            count: 573
        }],
    }

    ],

    dataset = dataset.map(function (d) {
        return d.data.map(function (o, i) {
            // Structure it so that your numeric
            // axis (the stacked amount) is y
            return {
                y: o.count,
                x: o.group_name
            };
        });
    }),
    stack = d3.layout.stack();

    stack(dataset);

    var dataset = dataset.map(function (group) {
    return group.map(function (d) {
        // Invert the x and y values, and y0 becomes x0
        return {
            x: d.y,
            y: d.x,
            x0: d.y0
        };
    });
    }),
    svg = d3.select('body')
        .append('svg')
        .attr('width', width + margins.left + margins.right)
        .attr('height', height + margins.top + margins.bottom)
        .append('g')
        .attr('transform', 'translate(' + margins.left + ',' + margins.top + ')'),
    xMax = d3.max(dataset, function (group) {
        return d3.max(group, function (d) {
            return d.x + d.x0;
        });
    }),
    xScale = d3.scale.linear()
        .domain([0, xMax])
        .range([0, width]),

    yScale = d3.scale.ordinal()
        .rangeRoundBands([0, height], .1),
    colours = d3.scale.category10(),
    groups = svg.selectAll('g')
        .data(dataset)
        .enter()
        .append('g')
        .style('fill', function (d, i) {
        return colours(i);
    }),
    rects = groups.selectAll('rect')
        .data(function (d) {
        return d;
    })
        .enter()
        .append('rect')
        .attr('x', function (d) {
        return xScale(d.x0);
    })
        .attr('y', function (d, i) {
        return yScale(d.y);
    })
        .attr('height', function (d) {
        return yScale.rangeBand();
    })
        .attr('width', function (d) {
        return xScale(d.x);
    })

        .on("mouseover", function() { tooltip.style("display", null); })
        .on("mouseout", function() { tooltip.style("display", "none"); })
        .on("mousemove", function(d) {
            mousemove(d)
  });


    var tooltip = svg.append("div")
    .attr("class", "tooltip")
    .style("display", "none");

    function mousemove(d) {
    //console.log(d)
    d3.select(this)
      .text(d.y + ': ' + d.x)
      .style("left", (d3.event.pageX - 34) + "px")
      .style("top", (d3.event.pageY - 12) + "px");
    }

    </script>
</body>
</html>
